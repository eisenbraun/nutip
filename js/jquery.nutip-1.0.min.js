/* Copyright (c) 2014 Michael Eisenbraun (http://jquery.michaeleisenbraun.com)
 * Licensed under the MIT License.
 *
 * Version: 1.0.0
 *
 * Requires: jQuery 1.7.2+
 */if(!window.console)var console={log:function(){}};var nutips={};(function(e){e.fn.nutip=function(n){return this.each(function(){var r=e(this),i=r.data("nutips");i||r.data("nutips",i=new t(this,n))})};var t=function(t,n){this.$el=e(t);this.$nutip=null;this.nutip=null;n&&e.extend(this,n);this.init()};t.prototype={nutip_id:null,position:null,type:null,style:null,title:null,message:null,template:null,zindex:1,templates:{nugget:'<div id="{{id}}" class="nutip {{type}} {{style}}"><h4 class="nutip-title">{{title}}<div class="close"></div></h4><p class="nutip-message">{{message}}</p></div>',tip:'<div id="{{id}}" class="nutip {{type}} {{style}}"><h4 class="nutip-title">{{title}}<div class="close"></div></h4><p class="nutip-message">{{message}}</p></div>',popup:'<div class="overlay" id="overlay-{{id}}"><div id="{{id}}" class="nutip {{type}} {{style}}"><h4 class="nutip-title">{{title}}<div class="close"></div></h4><p class="nutip-message">{{message}}</p></div></div>',notify:'<div id="{{id}}" class="nutip {{type}} {{style}}"><h4 class="nutip-title">{{title}}<div class="close"></div></h4><p class="nutip-message">{{message}}</p></div>',growl:'<div id="{{id}}" class="nutip {{type}} {{style}}"><h4 class="nutip-title">{{title}}<div class="close"></div></h4><p class="nutip-message">{{message}}</p></div>'},create:function(){var t=this;t.position=t.$el.offset();t.nutip=t.$el.attr("data-nutip");t.nutip_id="nutip-"+t.nutip;t.message=t.$el.attr("data-nutip-message");t.title=t.$el.attr("data-nutip-title");t.type=t.$el.attr("data-nutip-type")?t.$el.attr("data-nutip-type"):"tip";t.style=t.$el.attr("data-nutip-style")?t.$el.attr("data-nutip-style"):"canary";t.$el.addClass("nutip "+t.style+" trigger");var n={id:t.nutip_id,message:t.message,title:t.title,type:t.type,style:t.style};t.template=t.chevron(t.templates[t.type],n);switch(t.type){case"nugget":e(t.template).css({top:t.position.top}).appendTo("body");t.$nutip=e("#"+t.nutip_id);e(".close",t.$nutip).click(function(){t.hide()});break;case"tip":e(t.template).appendTo("body");t.$nutip=e("#"+t.nutip_id);t.position=t.$el.offset();if(t.$nutip.width()+t.position.left>e(window).width()){var r=e(window).width()-(t.$nutip.width()+30),i=t.position.left-r;t.addRule("#"+t.nutip_id+":before","left:"+(15+i)+"px");t.addRule("#"+t.nutip_id+":after","left:"+(16+i)+"px");t.$nutip.css({top:t.position.top-(t.$nutip.height()+5),left:r})}else t.$nutip.css({top:t.position.top-(t.$nutip.height()+5),left:t.position.left});t.$el.mouseout(function(){t.timeout=setTimeout(function(){t.hide()},500)});break;case"popup":e(t.template).appendTo("body");t.$overlay=e("#overlay-"+t.nutip_id);t.$nutip=e("#"+t.nutip_id);e(".close",t.$nutip).click(function(){t.hide()});break;case"notify":e(t.template).appendTo("body");t.$nutip=e("#"+t.nutip_id);e(".close",t.$nutip).click(function(){t.hide()});break;case"growl":e(t.template).appendTo("body");t.$nutip=e("#"+t.nutip_id);e(".close",t.$nutip).click(function(){t.hide()})}nutips[t.nutip]=t},hide:function(){var e=this;switch(e.type){case"nugget":e.$nutip.fadeOut("fast").css({right:-300});break;case"tip":e.$nutip.fadeOut();break;case"popup":e.$overlay.hide();e.$nutip.fadeOut("fast");break;case"notify":e.$nutip.animate({top:-200},500);break;case"growl":e.$nutip.fadeOut()}},show:function(t){var n=this;e.each(nutips,function(e,t){t.nutip_id!=n.nutip_id&&t.hide()});switch(n.type){case"nugget":n.$nutip.show().animate({right:100},500);break;case"tip":window.clearTimeout(n.timeout);n.$nutip.fadeIn();break;case"popup":n.$overlay.show();n.$nutip.fadeIn();break;case"notify":n.$nutip.show().animate({top:0},500);break;case"growl":n.$nutip.fadeIn()}},update:function(t){e.each(t,function(t,n){switch(t){case"message":e(".nutip-message",$this.$nutip).html(n);break;case"title":e(".nutip-title",$this.$nutip).html(n)}})},addRule:function(t,n){var r=document.styleSheets;e.each(r,function(e,r){if(r.href.indexOf("nutip.css")!=-1){r.insertRule(t+"{"+n+"}",r.cssRules.length);console.log(r.cssRules)}})},chevron:function(t,n){e.each(n,function(e,n){var r=new RegExp("{{"+e+"}}","g");t=t.replace(r,n)});return t},init:function(){var e=this;e.create()}}})(jQuery);$(document).ready(function(){$("[data-nutip]").nutip();$("body").on("click mouseover",".trigger",function(e){e.preventDefault();var t=$(this),n=t.data("nutip"),r=t.data("nutip-type");(r!="popup"&&r!="notify"&&r!="growl"||e.type!="mouseover")&&nutips[n].show()})});